import apiKey from "./common.js";

const fetchPriceHistoryGecko = (tokenId, resHandler, errHandler) => {
  // dummy
  resHandler(mockResult);
  return null;
  fetch(
    `https://pro-api.coingecko.com/api/v3/coins/${tokenId}/market_chart?days=${7}&vs_currency=${"usd"}`,
    {
      method: "GET",
      headers: {
        accept: "application/json",
        "x-cg-api-key": apiKey,
      },
    }
  )
    .then((res) => {
      return res.json();
    })
    .then((data) => {
      resHandler(data);
    })
    .catch((err) => errHandler(err));
};

export default fetchPriceHistoryGecko;

// ChanTodo: time range endpoint available

// curl --request GET \
//      --url https://api.coingecko.com/api/v3/coins/sweth/market_chart?days=7&vs_currency=usd \
//      --header 'accept: application/json' \
//      --header 'x-cg-api-key': 'CG-k46PPZyfQTDgq3QHe3csTvAG'

const mockResult = {
  prices: [
    [1713240131978, 3234.875341543537],
    [1713243886991, 3181.062125891886],
    [1713247487112, 3212.130978615087],
    [1713251130559, 3248.70566509108],
    [1713254692261, 3273.0336991156278],
    [1713258191223, 3248.7596020653386],
    [1713261767959, 3241.2482959362565],
    [1713265438069, 3206.5110742744655],
    [1713268952932, 3254.0495331396874],
    [1713272625828, 3237.423258903372],
    [1713276166804, 3226.2515082977784],
    [1713279624945, 3218.9940790358414],
    [1713283354632, 3179.5335603356257],
    [1713286988463, 3219.801711077703],
    [1713290482485, 3200.1742184733776],
    [1713294287406, 3239.7434246892703],
    [1713298044822, 3223.4717182793324],
    [1713301508050, 3231.9803606593023],
    [1713305123329, 3269.1761780775614],
    [1713308460740, 3256.412055986132],
    [1713312089954, 3248.0418015197542],
    [1713315683272, 3267.8720368763156],
    [1713319346590, 3260.8990446996017],
    [1713323025007, 3247.5544831160405],
    [1713326605643, 3250.4545873081593],
    [1713330195566, 3281.163992132674],
    [1713333794282, 3250.5869512659424],
    [1713337384096, 3256.8352666163946],
    [1713341298593, 3243.5117754369417],
    [1713344892098, 3239.148118243986],
    [1713348807812, 3232.349266655754],
    [1713352484356, 3230.0493481904496],
    [1713356031713, 3208.0997510901975],
    [1713359617872, 3188.3024694437277],
    [1713363241553, 3178.201886511467],
    [1713366883676, 3125.2568851155565],
    [1713370489792, 3108.0709981515065],
    [1713373707620, 3119.4922747817227],
    [1713377337447, 3160.7042312632534],
    [1713380911641, 3178.322550407442],
    [1713384518550, 3162.263303764528],
    [1713388116143, 3134.1032447784555],
    [1713391708014, 3145.034509538686],
    [1713395301864, 3157.4510832727456],
    [1713398887942, 3141.9847242743854],
    [1713402518471, 3148.2984049173324],
    [1713406097161, 3155.8374591597008],
    [1713409724400, 3165.9480831532933],
    [1713413338372, 3176.619016118805],
    [1713416878891, 3164.909764209805],
    [1713421118363, 3127.6872956100824],
    [1713424038893, 3121.469072918117],
    [1713427701656, 3132.6347702415214],
    [1713431327537, 3143.618414709916],
    [1713434880491, 3153.647609950522],
    [1713438488908, 3168.9168874376337],
    [1713442092682, 3197.8782913636564],
    [1713445705582, 3173.7526192616033],
    [1713449306593, 3197.8304584593875],
    [1713452888761, 3242.1920168821903],
    [1713456500580, 3222.089842994172],
    [1713460129680, 3210.336341829456],
    [1713463687072, 3196.171854377907],
    [1713467298803, 3214.9311914182213],
    [1713470954055, 3211.4404973509645],
    [1713474558133, 3222.902323313272],
    [1713478122079, 3217.148916698199],
    [1713481760197, 3223.3488556394827],
    [1713485353157, 3211.8767750215166],
    [1713488983163, 3191.701499154699],
    [1713492539029, 3095.027090366899],
    [1713496163405, 3087.0313630096302],
    [1713499759983, 3150.103410146447],
    [1713503369031, 3152.674279320955],
    [1713506947530, 3144.939914699652],
    [1713510518271, 3269.819412637003],
    [1713514119781, 3239.939691757788],
    [1713517785165, 3262.353342477171],
    [1713521413277, 3266.7739949853667],
    [1713524977680, 3255.783388356427],
    [1713528111156, 3262.1283678456634],
    [1713531717286, 3280.9322684822287],
    [1713535312430, 3236.4913699690396],
    [1713539273898, 3234.630212513409],
    [1713542869165, 3238.3642585114408],
    [1713546514339, 3221.303689053973],
    [1713550168683, 3225.3423609274414],
    [1713553620070, 3230.6760893796854],
    [1713557284060, 3260.7670953375427],
    [1713560850864, 3242.1531526386216],
    [1713564298175, 3250.880921290433],
    [1713568048299, 3225.7878348259205],
    [1713571778484, 3211.019094661101],
    [1713575372875, 3174.757324749085],
    [1713578983186, 3204.874746285722],
    [1713582567576, 3203.7311333099865],
    [1713586140059, 3208.3478973643532],
    [1713589714103, 3214.8500117477147],
    [1713593370840, 3214.2639611007194],
    [1713596901211, 3218.9180633472147],
    [1713600510654, 3211.2772544821073],
    [1713604110881, 3197.588796985944],
    [1713607716295, 3198.6717450666997],
    [1713611330514, 3192.625171378611],
    [1713614932638, 3207.318772266757],
    [1713618536848, 3220.7251646923546],
    [1713622109386, 3220.6726191739613],
    [1713625695060, 3218.0846699622093],
    [1713629288060, 3252.6221234819595],
    [1713632922272, 3262.5129091663407],
    [1713636493799, 3318.4323885811136],
    [1713640101702, 3298.708529556563],
    [1713643703798, 3312.447783128399],
    [1713647284178, 3314.927276579625],
    [1713650878287, 3303.983163873811],
    [1713654484952, 3301.649621364542],
    [1713658121097, 3305.0322450211115],
    [1713661695641, 3303.7229514402798],
    [1713665286098, 3310.0941924240933],
    [1713668939474, 3345.30553886858],
    [1713672513266, 3325.7636068407623],
    [1713676086176, 3337.9249066066564],
    [1713679689713, 3337.365379691621],
    [1713683290913, 3337.074963215114],
    [1713686933217, 3339.823886383027],
    [1713690510038, 3327.880286825755],
    [1713694105023, 3326.0630146968774],
    [1713697741897, 3331.741340885316],
    [1713701333975, 3325.3827295456276],
    [1713704936002, 3311.954104021294],
    [1713708488010, 3306.1658572893607],
    [1713712078371, 3308.8288762607963],
    [1713715695131, 3314.568224934378],
    [1713719317926, 3293.6705519233237],
    [1713722891228, 3297.80842875436],
    [1713726486970, 3307.6226505557433],
    [1713730098459, 3297.562313701082],
    [1713733683890, 3315.605583254673],
    [1713737289214, 3299.359229509232],
    [1713740907642, 3308.963358123384],
    [1713744500034, 3303.648270604289],
    [1713748118478, 3305.3376238166484],
    [1713751709630, 3299.3781555057435],
    [1713755227709, 3305.6236890190867],
    [1713758896279, 3360.372076899878],
    [1713762513545, 3357.5502348810137],
    [1713766279314, 3385.863470074383],
    [1713769681254, 3389.0148779082856],
    [1713773295267, 3370.037304394217],
    [1713776918901, 3364.4068951674767],
    [1713780500120, 3373.087273948493],
    [1713784115370, 3381.7958191781613],
    [1713787701011, 3366.5485964349355],
    [1713791313963, 3379.835132300011],
    [1713794920156, 3359.995221155384],
    [1713798545055, 3341.1570019147352],
    [1713802120324, 3350.0967869821457],
    [1713805770359, 3358.680359523095],
    [1713809357813, 3368.7207778224324],
    [1713812942783, 3362.806179399386],
    [1713816568577, 3354.8113823471977],
    [1713820166031, 3357.297177072976],
    [1713823760708, 3370.114259297872],
    [1713827380393, 3388.795247253617],
    [1713830940943, 3365.904023909628],
    [1713834532608, 3388.289396303976],
    [1713838137544, 3377.0174659855406],
    [1713841721675, 3369.6964973329636],
    [1713842260000, 3367.1729157007417],
  ],
  market_caps: [
    [1713240131978, 660249168.5414054],
    [1713243886991, 651338087.265829],
    [1713247487112, 657095431.7773929],
    [1713251130559, 664482011.5712492],
    [1713254692261, 669077897.199179],
    [1713258191223, 665909892.0589507],
    [1713261767959, 663487412.2547251],
    [1713265438069, 655673996.3216698],
    [1713268952932, 663655842.6180596],
    [1713272625828, 662210898.8145624],
    [1713276166804, 658616598.4315772],
    [1713279624945, 658684312.6164992],
    [1713283354632, 649443127.9550432],
    [1713286988463, 655927442.0250685],
    [1713290482485, 655295801.8410801],
    [1713294287406, 662716811.9631729],
    [1713298044822, 659190408.0234293],
    [1713301508050, 660105794.6340255],
    [1713305123329, 668858386.707254],
    [1713308460740, 665950422.0642642],
    [1713312089954, 663461904.9311621],
    [1713315683272, 668121243.7665759],
    [1713319346590, 664533620.0947119],
    [1713323025007, 662509378.6193497],
    [1713326605643, 663593276.891435],
    [1713330195566, 671097411.6614493],
    [1713333794282, 664877120.4815379],
    [1713337384096, 666007277.4929297],
    [1713341298593, 662746229.0760084],
    [1713344892098, 662095479.3362852],
    [1713348807812, 662658081.6479107],
    [1713352484356, 659606790.1219116],
    [1713356031713, 656057902.3852897],
    [1713359617872, 653087358.5856061],
    [1713363241553, 654773991.9425671],
    [1713366883676, 641454924.3883727],
    [1713370489792, 634864707.224406],
    [1713373707620, 636707746.6133729],
    [1713377337447, 643240890.8094496],
    [1713380911641, 648355731.4968008],
    [1713384518550, 645472617.3816246],
    [1713388116143, 639119965.0149533],
    [1713391708014, 642899074.0345857],
    [1713395301864, 644609138.8020089],
    [1713398887942, 639966528.3873926],
    [1713402518471, 641010515.8018689],
    [1713406097161, 642721642.2973108],
    [1713409724400, 645137342.1686766],
    [1713413338372, 647249674.5873127],
    [1713416878891, 644469953.4881508],
    [1713421118363, 637990644.5931247],
    [1713424038893, 634082431.5020891],
    [1713427701656, 637065349.1608462],
    [1713431327537, 638748542.5999581],
    [1713434880491, 642516941.886091],
    [1713438488908, 643456238.5005357],
    [1713442092682, 650912738.1890972],
    [1713445705582, 645376130.3230859],
    [1713449306593, 650698401.6185331],
    [1713452888761, 653662329.6188473],
    [1713456500580, 654693937.7023313],
    [1713460129680, 652700586.7075341],
    [1713463687072, 649899233.7309581],
    [1713467298803, 650657764.564503],
    [1713470954055, 652584193.6247058],
    [1713474558133, 653417177.5796908],
    [1713478122079, 653368360.8813483],
    [1713481760197, 654013107.6671097],
    [1713485353157, 653689435.3457178],
    [1713488983163, 647899767.6937621],
    [1713492539029, 626146616.8997871],
    [1713496163405, 627112462.9094054],
    [1713499759983, 635003328.4253391],
    [1713503369031, 639650454.9161714],
    [1713506947530, 640034245.3248913],
    [1713510518271, 662505305.0996704],
    [1713514119781, 656263335.547933],
    [1713517785165, 661887207.8327457],
    [1713521413277, 659852987.7693933],
    [1713524977680, 658268349.4171306],
    [1713528111156, 659223580.5720403],
    [1713531717286, 659693304.0760535],
    [1713535312430, 659265443.9378799],
    [1713539273898, 656512987.7702036],
    [1713542869165, 652756853.4051833],
    [1713546514339, 645399829.9736711],
    [1713550168683, 649122861.5067732],
    [1713553620070, 647036255.7932603],
    [1713557284060, 649994761.2382846],
    [1713560850864, 647110363.0461845],
    [1713564298175, 650550133.4368105],
    [1713568048299, 647055374.1597317],
    [1713571778484, 644372671.4002745],
    [1713575372875, 636453272.9015225],
    [1713578983186, 642383766.9204422],
    [1713582567576, 642114617.609282],
    [1713586140059, 648462457.5921206],
    [1713589714103, 650601886.2854364],
    [1713593370840, 650019150.3120947],
    [1713596901211, 650341274.5775702],
    [1713600510654, 649830920.347066],
    [1713604110881, 649786788.627884],
    [1713607716295, 650272147.6611],
    [1713611330514, 647983452.0854346],
    [1713614932638, 649847229.1617466],
    [1713618536848, 652657694.8928525],
    [1713622109386, 653708143.5048072],
    [1713625695060, 653405793.7520665],
    [1713629288060, 664097292.3757333],
    [1713632922272, 661664389.3754337],
    [1713636493799, 672828175.6576737],
    [1713640101702, 668948498.7317754],
    [1713643703798, 671956731.5918107],
    [1713647284178, 672423368.4123669],
    [1713650878287, 670648319.4782698],
    [1713654484952, 670669722.1421832],
    [1713658121097, 671984197.1860865],
    [1713661695641, 669512577.1248212],
    [1713665286098, 671226775.1165149],
    [1713668939474, 678144423.9273089],
    [1713672513266, 675280962.7183846],
    [1713676086176, 677641505.708154],
    [1713679689713, 676956497.0984962],
    [1713683290913, 677269788.1149122],
    [1713686933217, 677951838.9853058],
    [1713690510038, 675455736.860656],
    [1713694105023, 675251117.7719591],
    [1713697741897, 675610073.0612389],
    [1713701333975, 675117555.4090385],
    [1713704936002, 671942430.3740618],
    [1713708488010, 670433682.6908995],
    [1713712078371, 671259760.2458304],
    [1713715695131, 672251555.5689389],
    [1713719317926, 667108913.9436471],
    [1713722891228, 668955147.8794636],
    [1713726486970, 668977503.9316673],
    [1713730098459, 666481572.3713503],
    [1713733683890, 670341034.2765357],
    [1713737289214, 668249460.2902441],
    [1713740907642, 670637127.6532499],
    [1713744500034, 669055990.8763653],
    [1713748118478, 670031700.88416],
    [1713751709630, 668023838.2204747],
    [1713755227709, 669165410.9831111],
    [1713758896279, 679871884.806489],
    [1713762513545, 679037862.9011526],
    [1713766279314, 683940624.2200212],
    [1713769681254, 685671609.8705652],
    [1713773295267, 681666258.3031573],
    [1713776918901, 680674827.4341677],
    [1713780500120, 683767635.1315963],
    [1713784115370, 685672228.8351291],
    [1713787701011, 682291677.5455265],
    [1713791313963, 684093721.3631728],
    [1713794920156, 680404067.0411801],
    [1713798545055, 677688505.4594078],
    [1713802120324, 677605528.6909407],
    [1713805770359, 678455730.5014278],
    [1713809357813, 684483588.1124083],
    [1713812942783, 680584922.946693],
    [1713816568577, 679287919.0214009],
    [1713820166031, 679861885.8243114],
    [1713823760708, 681690527.708679],
    [1713827380393, 685534099.8744112],
    [1713830940943, 682462307.4355547],
    [1713834532608, 686036125.2050856],
    [1713838137544, 682576884.7077081],
    [1713841721675, 681660967.982682],
    [1713842260000, 681731549.5238143],
  ],
  total_volumes: [
    [1713240131978, 3729499.878487876],
    [1713243886991, 2861357.4623006154],
    [1713247487112, 3091390.3054195084],
    [1713251130559, 2227896.5008689533],
    [1713254692261, 2186983.384031187],
    [1713258191223, 2238960.7280222313],
    [1713261767959, 1831068.0621273492],
    [1713265438069, 1228083.4699220986],
    [1713268952932, 1230620.3511100025],
    [1713272625828, 1215671.236045751],
    [1713276166804, 1232232.165160432],
    [1713279624945, 1225845.139562047],
    [1713283354632, 709569.4790512085],
    [1713286988463, 450192.291101333],
    [1713290482485, 441537.2725390002],
    [1713294287406, 453217.08950162656],
    [1713298044822, 475566.1964082854],
    [1713301508050, 561878.3808442579],
    [1713305123329, 567494.112401745],
    [1713308460740, 554915.8965569963],
    [1713312089954, 599991.5962189797],
    [1713315683272, 710420.1662591245],
    [1713319346590, 721190.5769195259],
    [1713323025007, 657650.8198290048],
    [1713326605643, 679725.1282918411],
    [1713330195566, 705556.243051271],
    [1713333794282, 958433.3239136836],
    [1713337384096, 1036460.6943830262],
    [1713341298593, 1114036.9137410722],
    [1713344892098, 1096505.3559759315],
    [1713348807812, 1418368.3800252418],
    [1713352484356, 1427416.8091433244],
    [1713356031713, 1460953.4652667674],
    [1713359617872, 1427738.9985377113],
    [1713363241553, 1400778.5590445132],
    [1713366883676, 1656830.8698990385],
    [1713370489792, 1640060.2951280223],
    [1713373707620, 2160362.32566304],
    [1713377337447, 2307925.647769973],
    [1713380911641, 2391811.721755725],
    [1713384518550, 2457672.8085847935],
    [1713388116143, 2382225.392201029],
    [1713391708014, 3061106.467346525],
    [1713395301864, 3312728.6934184707],
    [1713398887942, 3248692.1805522456],
    [1713402518471, 3222628.6299676136],
    [1713406097161, 3326805.085402321],
    [1713409724400, 3565872.8511733417],
    [1713413338372, 4126227.2378397784],
    [1713416878891, 4226271.643551114],
    [1713421118363, 4450807.105735259],
    [1713424038893, 4455502.371793296],
    [1713427701656, 4900286.8349812245],
    [1713431327537, 4936998.025647896],
    [1713434880491, 4820438.957194901],
    [1713438488908, 4976542.515857756],
    [1713442092682, 5172264.222220771],
    [1713445705582, 5405412.445605691],
    [1713449306593, 5821063.089937603],
    [1713452888761, 6822752.490513616],
    [1713456500580, 7190040.032322514],
    [1713460129680, 6717751.861704472],
    [1713463687072, 6835974.1237125555],
    [1713467298803, 6899702.082710961],
    [1713470954055, 6721984.374577622],
    [1713474558133, 6400702.3742264975],
    [1713478122079, 5807693.551046464],
    [1713481760197, 5789429.9420043845],
    [1713485353157, 6033772.220691393],
    [1713488983163, 5989616.397236917],
    [1713492539029, 5763732.396034194],
    [1713496163405, 5639252.441181396],
    [1713499759983, 5183132.713047915],
    [1713503369031, 5112148.13113222],
    [1713506947530, 4789589.596822709],
    [1713510518271, 4461558.634150577],
    [1713514119781, 4359388.007132998],
    [1713517785165, 4301829.919508548],
    [1713521413277, 5208126.293038853],
    [1713524977680, 3039522.5642685867],
    [1713528111156, 5529419.566207597],
    [1713531717286, 5561192.2589793345],
    [1713535312430, 2881813.37637666],
    [1713539273898, 3194133.7866248013],
    [1713542869165, 3146736.0939452406],
    [1713546514339, 3430283.052540049],
    [1713550168683, 3653419.363656683],
    [1713553620070, 3641668.2831398635],
    [1713557284060, 3432640.233900493],
    [1713560850864, 3817401.8632428194],
    [1713564298175, 3813580.0088233165],
    [1713568048299, 2236550.421456257],
    [1713571778484, 3396110.0596255693],
    [1713575372875, 2873600.2387326984],
    [1713578983186, 1937105.1376238521],
    [1713582567576, 3197645.778232801],
    [1713586140059, 3204115.743609578],
    [1713589714103, 3479670.1066894904],
    [1713593370840, 3273258.670798652],
    [1713596901211, 1838782.4870436867],
    [1713600510654, 3270326.4873502795],
    [1713604110881, 3112139.0703227357],
    [1713607716295, 2572323.521861301],
    [1713611330514, 1173053.6917881018],
    [1713614932638, 2352196.4021436935],
    [1713618536848, 1245040.420849176],
    [1713622109386, 2365473.1071223435],
    [1713625695060, 2357152.7092190124],
    [1713629288060, 2326402.835889353],
    [1713632922272, 2127692.5962239136],
    [1713636493799, 2080481.7724693096],
    [1713640101702, 1920832.228846223],
    [1713643703798, 2143604.9487055545],
    [1713647284178, 1150880.9084533858],
    [1713650878287, 1141697.4134993001],
    [1713654484952, 1144548.9899909939],
    [1713658121097, 2241598.4638940557],
    [1713661695641, 2400955.5633515203],
    [1713665286098, 2400314.4286582437],
    [1713668939474, 2445081.9246927975],
    [1713672513266, 2254616.726239545],
    [1713676086176, 2083831.1523737411],
    [1713679689713, 2069613.1158731587],
    [1713683290913, 2043564.8373234766],
    [1713686933217, 2027008.1437482268],
    [1713690510038, 1884151.1061955802],
    [1713694105023, 2069686.5179058728],
    [1713697741897, 2047138.9729258404],
    [1713701333975, 1670592.013605539],
    [1713704936002, 1595206.893888578],
    [1713708488010, 1848469.544330109],
    [1713712078371, 2138267.2568090404],
    [1713715695131, 2536935.0015389286],
    [1713719317926, 2498245.3068736815],
    [1713722891228, 2621082.608150183],
    [1713726486970, 2676025.441960497],
    [1713730098459, 2470394.268074016],
    [1713733683890, 2413200.255013847],
    [1713737289214, 2408264.149507819],
    [1713740907642, 2432469.4456353686],
    [1713744500034, 2283049.8871095744],
    [1713748118478, 2256624.784796004],
    [1713751709630, 2331164.806076911],
    [1713755227709, 2595620.5529884174],
    [1713758896279, 2718597.4201879553],
    [1713762513545, 2716626.571607255],
    [1713766279314, 2748969.78073514],
    [1713769681254, 2818119.611745447],
    [1713773295267, 2819536.3447333584],
    [1713776918901, 2723765.9702244913],
    [1713780500120, 2575533.182912544],
    [1713784115370, 2962259.213741355],
    [1713787701011, 3351430.1898728637],
    [1713791313963, 3184138.858894469],
    [1713794920156, 2962235.532596191],
    [1713798545055, 2760509.241380059],
    [1713802120324, 2455605.287709176],
    [1713805770359, 2717008.653164944],
    [1713809357813, 2566978.9655894665],
    [1713812942783, 2528382.8656294835],
    [1713816568577, 2454391.529724849],
    [1713820166031, 2510793.488833942],
    [1713823760708, 2821272.354164025],
    [1713827380393, 1439234.96279062],
    [1713830940943, 2837747.2552483273],
    [1713834532608, 2745381.2794179707],
    [1713838137544, 2519155.4871575087],
    [1713841721675, 2402255.9392215577],
    [1713842260000, 2415071.227932264],
  ],
};
